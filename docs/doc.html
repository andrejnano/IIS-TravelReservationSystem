
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Air Tickets Reservation</title>
<style type="text/css">
  html {
    font-family:
      system-ui,
      /* macOS 10.11-10.12 */ -apple-system,
      /* Windows 6+ */ Segoe UI,
      /* Android 4+ */ Roboto,
      /* Ubuntu 10.10+ */ Ubuntu,
      /* Gnome 3+ */ Cantarell,
      /* KDE Plasma 4+ */ Oxygen,
      /* fallback */ sans-serif,
      /* macOS emoji */ "Apple Color Emoji",
      /* Windows emoji */ "Segoe UI Emoji",
      /* Windows emoji */ "Segoe UI Symbol",
      /* Linux emoji */ "Noto Color Emoji";
    tab-size: 4;
    word-break: break-all;
  }
  body {
    text-rendering: optimizelegibility;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 400;
  }
  h1 {
    letter-spacing: -1.5px;
    font-weight: 300;
  }

  h2 {
    letter-spacing: -0.5px;
    font-weight: 300;
  }

	table { border-collapse: collapse; }
	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
	dt { font-weight: bold; margin-top: 0.5em; }
</style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavičce dokumentu
 podle použitého editoru -->

<h1>Flight Ticket Reservation System</h1> <!-- Nahradte názvem svého zadání -->

<dl>
	<dt>Authors</dt>
	<dd>Andrej Naňo
	    <a href="mailto:xnanoa00@stud.fit.vutbr.cz">xnanoa00@stud.fit.vutbr.cz</a> -
		frontend, view--view-model, aplication interface design, flight itinerary creation, javascript, vue
	</dd>
	<dd>Peter Marko
	    <a href="mailto:xmarko15@stud.fit.vutbr.cz">xmarko15@stud.fit.vutbr.cz</a> -
    	backend, database from IDS adjustment, create session for logged user, search flight by parameters, php, mysql
	</dd>
	<dd>Stanislav Mechl
	    <a href="mailto:xmechl00@stud.fit.vutbr.cz">xmechl00@stud.fit.vutbr.cz</a> -
    backend, user login implementation, API for database insertion, frontend for search tables, vue, php
	</dd>
	<dt>URL of the application</dt>
	<dd><a href="http://www.stud.fit.vutbr.cz/~xmarko15/IIS">http://www.stud.fit.vutbr.cz/~xmarko15/IIS</a></dd>
</dl>




<h2>Test users</h2>
<p>Roles of users, which can be used at login.</p>
<table>
<tr><th>Email</th><th>Password</th><th>Role</th></tr>
<tr><td>a@d.min</td><td>password</td><td>Administrator</td></tr>
<tr><td>teodorL@gmail.com</td><td>password</td><td>User</td></tr>
</table>

<h2>Implementation</h2>
  <p>
    The application's architecture is heavily inspired by the well known MVC (Model View Controller) architecture.
    But to make things simpler, we decided to divide our application into just two segments, frontend and backend.
    This allowed us to develop both user interface and business logic functionality simultaneously without conflicts.
    Another advantage of this separation of concerns was that we could choose those parts of the project, that suited us better.
  </p>
  <p>
    However, to make the application work as whole system, these two parts need to communicate and react to each other.
    For this, we designed and implemented an Application Programming Interface (API).
    The API consists of multiple definitions of routes and their usages and return values.
  </p>
  <p>
    Frontend can access resources from backend using two types of requests GET or POST. Backend returns JSON containing information from the
    database as a response. Frontend then parses JSON and shows information to user.
  </p>
  <p>
    For implementation we have used two frameworks, Laravel for the backend PHP implementation and Vue.js for frontend javascript implementation.
    Vue framework allowed us to create a modern, Single Page Application that is usable by both desktop and mobile devices.
    Laravel made reocurring tasks a lot simpler, by automating and already bootstraping a whole range of functionality out-of-the-box.
    With this frameworks we have been able to create more user friendly application.
  </p>
<h2>Architecture</h2>
<div>
  <img src="architecture.jpg" alt="Architecture of information system">
</div>

<h2>Backend</h2>
<ul>
	<li>Docker images + environment setup</li>
	<li>Laravel / PHP</li>
	<li>Apache configs</li>
	<li>SQL + MySQL DB setup</li>
</ul>

<h2>Frontend</h2>
<ul>
  <li><strong>JavaScript (ECMAScript 6)</strong></li>
  <li><strong>Vue.js framework</strong></li>
  <li><strong>Vuetify</strong></li>
  <li>Dependencies:
    <ul>
      <li> "@babel/polyfill": "^7.0.0", </li>
      <li> "@fortawesome/fontawesome-svg-core": "^1.2.8",</li>
      <li> "@fortawesome/free-solid-svg-icons": "^5.5.0",</li>
      <li> "@fortawesome/vue-fontawesome": "^0.1.2",</li>
      <li> "html2canvas": "^1.0.0-alpha.12",</li>
      <li> "i": "^0.3.6",</li>
      <li> "jspdf": "^1.4.1",</li>
      <li> "jspdf-autotable": "^2.3.5",</li>
      <li> "material-design-icons-iconfont": "^4.0.2",</li>
      <li> "moment": "^2.22.2",</li>
      <li> "npm": "^6.4.1",</li>
      <li> "vue-html2canvas": "0.0.4",</li>
      <li> "vue-loading-overlay": "^3.1.0",</li>
      <li> "vue-resource": "^1.5.1",</li>
      <li> "vue-router": "^3.0.1",</li>
      <li> "vue-search-select": "^2.7.0",</li>
      <li> "vue-slider-component": "^2.8.2",</li>
      <li> "vuejs-datepicker": "^1.5.4",</li>
      <li> "vuetify": "^1.3.11",</li>
      <li> "webfontloader": "^1.6.28"</li>
    </ul>
  </li>
	<li>Developement
    <ul>
      <li>Webpack</li>
      <li>Node.js</li>
      <li>Webpack</li>
    </ul>
  </li>
</ul>
<h2>
	Application Interface
</h2>
<table>
<tbody>
<tr>
  <td><b>Route</b></td>
  <td><b>Request type</b></td>
  <td><b>Parameters</b></td>
  <td><b>Action</b></td>
</tr>
<tr></tr>
<td>/api/search</td>
<td>get</td>
<td>origin, destination, tickets, class, min_price, max_price, departure_date, arrival_date</td>
<td>Returns JSON containing flights, which satisfies the condition</td>
<tr></tr>
<td>/api/flight</td>
<td>get</td>
<td>ft_1, ft_2, fb_1, fb_2, tickets, class</td>
<td>Returns detail flight information about max for flights, which will be booked as reservation</td>
<tr></tr>
<td>/api/reservation</td>
<td>post</td>
<td></td>
<td>creates new empty reservation for currently logged in user</td>
<tr></tr>
<td>/api/reserve</td>
<td>post</td>
<td>res_id, ticket_id, email, first_name, last_name</td>
<td>Assigns ticket to reservation</td>
<tr></tr>
<td>/api/delete_reservation</td>
<td>post</td>
<td>res_id</td>
<td>Removes specified reservation, user can remove only his reservations</td>
<tr></tr>
<td>/api/login</td>
<td>post</td>
<td>email</td>
<td>password</td>
<tr>Will set session parameters for user</tr>
<td>/api/logout</td>
<td>post</td>
<td></td>
<td>Will clear session</td>
<tr></tr>
<td>/api/session</td>
<td>get</td>
<td></td>
<td>Returns current session parameters and data about user</td>
<tr></tr>
<td>/api/register</td>
<td>post</td>
<td>email, password, first_name, last_name</td>
<td>Will create new user and log him in</td>
<tr></tr>
<td>/api/new_password</td>
<td>post</td>
<td>new_password</td>
<td>Changes password of current user</td>
<tr></tr>
<td>/api/update_information</td>
<td>post</td>
<td>first_name, last_name, email</td>
<td>Updates information about current user</td>
<tr></tr>
<td>/api/add_flight</td>
<td>post</td>
<td>airplane, airline, departure_time, arrival_time, origin, destination</td>
<td>Create new flight, can be only used by admin</td>
<tr></tr>
<td>/api/add_airline</td>
<td>post</td>
<td>airline, full_name, nationality, hub</td>
<td>Create new airline in database, can be only used by admin</td>
<tr></tr>
<td>/api/add_airport</td>
<td>post</td>
<td>airport_code, city, country</td>
<td>Create new airport, can be only used by admin</td>
<tr></tr>
<td>/api/add_airplane</td>
<td>post</td>
<td>producer, model, fclass_seats, bclass_seats, eclass_seats, airline</td>
<td>Create new airplane in DB, can be only used by admin</td>
<tr></tr>
<td>/api/add_user</td>
<td>post</td>
<td>first_name, last_name, email, password</td>
<td>Create new user, can be only used by admin</td>
<tr></tr>
<td>/api/update_airline</td>
<td>post</td>
<td>full_name, nationality, hub, id_logo</td>
<td>Updates information about airline, can be only used by admin</td>
<tr></tr>
<td>/api/update_user</td>
<td>post</td>
<td>first_name, last_name, email, password</td>
<td>Updates information about user, can be only used by admin</td>
<tr></tr>
<td>/api/delete_user</td>
<td>post</td>
<td>id</td>
<td>Removes user from DB, can be used by admin user</td>
<tr></tr>
<td>/api/my_reservations</td>
<td>post</td>
<td></td>
<td>Show all reservations of current user</td>
<tr></tr>
<td>/api/return_ticket</td>
<td>post</td>
<td>ticket</td>
<td>Deletes ticket from database</td>
<tr></tr>
<td>/api/delete_flight</td>
<td>post</td>
<td>flight_number</td>
<td>Removes selected flight from DB, can be used by admin user</td>
<tr></tr>
<td>/api/delete_airplane</td>
<td>post</td>
<td>airplane</td>
<td>Removes selected airplane from DB, can be used by admin user</td>
<tr></tr>
<td>/api/delete_airline</td>
<td>post</td>
<td>airline</td>
<td>Removes selected airline from DB, can be used by admin user</td>
<tr></tr>
<td>/api/airports</td>
<td>get</td>
<td></td>
<td>Returns information about all airports in DB</td>
<tr></tr>
<td>/api/flights</td>
<td>get</td>
<td></td>
<td>Returns information about all flights in DB</td>
<tr></tr>
<td>/api/airplanes</td>
<td>get</td>
<td></td>
<td>Returns information about all airplanes in DB</td>
<tr></tr>
<td>/api/airlines</td>
<td>get</td>
<td></td>
<td>Returns information about all airlines in DB</td>
<tr></tr>
<td>/api/users</td>
<td>get</td>
<td></td>
<td>Returns information about all users in DB</td>
<tr></tr>
<td>/api/pay</td>
<td>post</td>
<td>res_id</td>
<td>User can pay his reservation</td>
</tbody></table>

<h2>Install prerequisites:</h2>
<ul>
	<li>Docker</li>
	<li>Composer</li>
	<li>Node.js</li>
</ul>

<h2>Instalation</h2>

<ol>
	<li>cd IIS-projekt</li>
	<li>composer install to install all the required dependencies</li>
	<li>npm install</li>
	<li>cp .env.example .env create a new environment config based on project's default</li>
	<li>php artisan key:generate to create new APP_KEY in your local .env (REQUIRED)</li>
	<li>chmod -R o+rw bootstrap/ storage/ to allow Apache to edit project's files</li>
	<li>docker-compose up --build (only for the first time or major changes) or docker-compose up</li>
	<li>open http://localhost:8080 in a web browser</li>
</ol>

<h2>Known problems</h2>
<ul>
	<li>Security problems, everything sent as clear text</li>
	<li>Sometimes when more tickets are requested unavailable tickets could be found</li>
	<li></li>
	<li></li>
</ul>
</body>
</html>
